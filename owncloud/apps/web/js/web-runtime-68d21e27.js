define(["exports","./chunks/vendor-62f8e512","./chunks/error-2937cd2c"],(function(e,t,i){"use strict";var a={computed:{...t.mapGetters(["getNavItemsByExtension"])},methods:{navigation_getMenuItems(e){return this.applicationsList.filter((t=>"extension"===t.type?this.getNavItemsByExtension(t.id).filter((t=>n(e,t))).length>0:n(e,t))).map((e=>{const t=this.$language.current;let i,a,n=e.title?e.title.en:e.name;e.title&&e.title[t]&&(n=e.title[t]),e.icon?e.icon.indexOf(".")<0?i=e.icon:a=e.icon:i="deprecated";const o={iconMaterial:i,iconUrl:a,title:n};return e.url?(o.url=e.url,o.target=["_blank","_self","_parent","_top"].includes(e.target)?e.target:"_blank"):e.path?o.path=e.path:o.path=`/${e.id}`,o}))}}};function n(e,t){return t.menu?e.includes(t.menu):e.includes(null)}const o={mixins:[a],props:{applicationsList:{type:Array,required:!1,default:()=>[]}},computed:{menuItems(){return this.navigation_getMenuItems([null,"apps","appSwitcher"])},applicationSwitcherLabel(){return this.$gettext("Application Switcher")}},mounted(){t.uikit.util.on("#app-switcher-dropdown","shown",(()=>{this.focusFirstLink()})),t.uikit.util.on("#app-switcher-dropdown","hidden",(()=>{this.$emit("closed"),this.focusMenuButton()}))},methods:{logout(){this.visible=!1,this.$store.dispatch("logout")},focusFirstLink(){setTimeout((()=>{this.$refs.menu.$el.querySelector("a:first-of-type").focus()}),500)},focusMenuButton(){this.$refs.menubutton.$el.focus()}}};var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("nav",{staticClass:"uk-flex uk-flex-middle",attrs:{"aria-label":e.$gettext("Main navigation")}},[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.applicationSwitcherLabel,expression:"applicationSwitcherLabel"}],ref:"menubutton",staticClass:"oc-topbar-menu-burger",attrs:{id:"_appSwitcherButton",appearance:"raw","aria-label":e.applicationSwitcherLabel}},[i("oc-icon",{staticClass:"uk-flex",attrs:{name:"apps"}})],1),e._v(" "),i("oc-drop",{ref:"menu",staticClass:"uk-width-large",attrs:{"drop-id":"app-switcher-dropdown",toggle:"#_appSwitcherButton",mode:"click",options:{pos:"bottom-right",delayHide:0},"close-on-click":"","padding-size":"small"}},[i("ul",{staticClass:"uk-grid-small uk-text-center",attrs:{"uk-grid":""}},e._l(e.menuItems,(function(t,a){return i("li",{key:"apps-menu-"+a,staticClass:"uk-width-1-3"},[t.url?i("a",{key:"apps-menu-external-link",attrs:{target:t.target,href:t.url}},[i("oc-icon",{attrs:{name:t.iconMaterial,size:"xlarge"}}),e._v(" "),i("span",{staticClass:"uk-display-block",domProps:{textContent:e._s(e.$gettext(t.title))}})],1):i("router-link",{key:"apps-menu-internal-link",attrs:{to:t.path}},[i("oc-icon",{attrs:{name:t.iconMaterial,size:"xlarge"}}),e._v(" "),i("span",{staticClass:"uk-display-block",domProps:{textContent:e._s(e.$gettext(t.title))}})],1)],1)})),0)])],1)};s._withStripped=!0;const r=t.normalizeComponent({render:s,staticRenderFns:[]},undefined,o,undefined,false,undefined,!1,void 0,void 0,void 0);const l={mixins:[a],props:{userId:{type:String,required:!0},userDisplayName:{type:String,required:!0},userEmail:{type:String,required:!1,default:null},applicationsList:{type:Array,required:!1,default:()=>[]}},computed:{menuItems(){return this.navigation_getMenuItems(["user"])}},watch:{visible(e){e?this.focusFirstLink():this.$emit("closed")}},methods:{logout(){this.visible=!1,setTimeout((()=>{this.$store.dispatch("logout")}))},focusFirstLink(){setTimeout((()=>{this.$refs.menuButton.$el.querySelector("a:first-of-type").focus()}),500)}}};var c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.userId?i("nav",{attrs:{"aria-label":e.$gettext("Account menu")}},[i("oc-button",{ref:"menuButton",staticClass:"oc-topbar-personal uk-height-1-1 oc-pr-xs",attrs:{id:"_userMenuButton",appearance:"raw",variation:"passive","aria-label":e.$gettext("User Menu")}},[i("oc-grid",{attrs:{flex:""}},[i("avatar-image",{staticClass:"oc-topbar-personal-avatar uk-flex-inline uk-flex-center uk-flex-middle oc-px-s",attrs:{width:24,userid:e.userId,"user-name":e.userDisplayName}}),e._v(" "),i("div",{staticClass:"oc-topbar-personal-label oc-text-bold oc-ml-rm",domProps:{textContent:e._s(e.userDisplayName)}})],1)],1),e._v(" "),i("oc-drop",{ref:"menu",staticClass:"uk-width-auto",attrs:{"drop-id":"account-info-container",toggle:"#_userMenuButton",mode:"click","close-on-click":"",options:{pos:"bottom-right",delayHide:0},"padding-size":"small"}},[i("ul",{staticClass:"uk-list"},[i("li",{staticClass:"uk-text-nowrap"},[i("oc-button",{attrs:{id:"oc-topbar-account-manage",type:"router-link",to:{path:"/account"},appearance:"raw","gap-size":"xsmall","justify-content":"left"}},[i("oc-icon",{attrs:{name:"portrait"}}),e._v(" "),i("translate",[e._v("Profile")])],1)],1),e._v(" "),e._l(e.menuItems,(function(t,a){return i("li",{key:"user-menu-"+a},[t.url?i("oc-button",{attrs:{type:"a",appearance:"raw","gap-size":"xsmall","justify-content":"left",target:t.target,href:t.url}},[i("oc-icon",{attrs:{name:t.iconMaterial}}),e._v(" "),i("translate",[e._v(e._s(t.title))])],1):i("oc-button",{attrs:{type:"router-link",appearance:"raw","gap-size":"xsmall","justify-content":"left",to:{path:t.path}}},[i("oc-icon",{attrs:{name:t.iconMaterial}}),e._v(" "),i("translate",[e._v(e._s(t.title))])],1)],1)})),e._v(" "),i("li",[i("oc-button",{attrs:{id:"oc-topbar-account-logout",appearance:"raw","gap-size":"xsmall","justify-content":"left"},on:{click:e.logout}},[i("oc-icon",{attrs:{name:"sign-out"}}),e._v(" "),i("translate",[e._v("Log out")])],1)],1)],2)])],1):e._e()};c._withStripped=!0;const u=t.normalizeComponent({render:c,staticRenderFns:[]},undefined,l,undefined,false,undefined,!1,void 0,void 0,void 0);const d={computed:{...t.mapGetters(["activeNotifications","configuration"]),notificationsLabel(){return this.$gettext("Notifications")}},methods:{...t.mapActions(["deleteNotification","showMessage"]),...t.mapActions("Files",["loadFolder"]),executeRequest(e,t,i,a){this.$client.requests.ocs({service:"apps/"+e,action:t.substr(t.lastIndexOf("api")),method:i}).then((e=>{this.deleteNotification({client:this.$client,notification:a}),e.json().then((e=>{e.ocs.data.forEach((e=>{const t=e.path.substr(0,e.path.lastIndexOf("/")+1);t===(this.$route.params.item?this.$route.params.item:"/")&&this.reloadFilesList(t)}))}))}))},reloadFilesList(e){this.loadFolder({client:this.$client,absolutePath:e,$gettext:this.$gettext,routeName:this.$route.name}).catch((e=>{this.showMessage({title:this.$gettext("Loading folder failed…"),desc:e.message,status:"danger"})}))}}};var p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-flex uk-flex-middle",attrs:{id:"oc-notification"}},[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.notificationsLabel,expression:"notificationsLabel"}],attrs:{id:"oc-notification-bell",appearance:"raw","aria-label":e.notificationsLabel}},[i("oc-icon",{staticClass:"oc-cursor-pointer uk-flex uk-flex-middle",attrs:{name:"bell"}})],1),e._v(" "),i("oc-drop",{staticClass:"uk-overflow-auto uk-width-3-4 uk-width-large@s",attrs:{id:"oc-notification-drop","drop-id":"notifications-dropdown",toggle:"#oc-notification-bell",mode:"click",options:{pos:"bottom-right",delayHide:0},"padding-size":"small"}},e._l(e.activeNotifications,(function(t,a){return i("div",{key:a,staticClass:"uk-width-1-1"},[i("h4",{domProps:{textContent:e._s(t.subject)}}),e._v(" "),t.message?i("p",{staticClass:"uk-text-small"},[e._v(e._s(t.message))]):e._e(),e._v(" "),i("p",[t.link?i("a",{staticClass:"uk-link",attrs:{href:t.link,target:"_blank"}},[e._v(e._s(t.link))]):e._e()]),e._v(" "),i("div",{staticClass:"uk-button-group uk-width-1-1 uk-flex-right"},[0!==t.actions.length?e._l(t.actions,(function(n,o){return i("oc-button",{key:a+"-"+o,staticClass:"oc-ml-s",attrs:{size:"small",variation:n.primary?"primary":"passive",appearance:"filled"},on:{click:function(i){return i.preventDefault(),e.executeRequest(t.app,n.link,n.type,t.notification_id)}}},[e._v(e._s(n.label))])})):i("oc-button",{attrs:{id:"resolve-notification-button",size:"small"},on:{"~click":function(i){return i.preventDefault(),e.deleteNotification({client:e.$client,notification:t.notification_id})}}},[e._v("\n          Mark as read\n        ")])],2),e._v(" "),a+1!==e.activeNotifications.length?i("hr"):e._e()])})),0)],1)};p._withStripped=!0;const m=t.normalizeComponent({render:p,staticRenderFns:[]},undefined,d,"data-v-6d5353a3",false,undefined,!1,void 0,void 0,void 0);const g={name:"FeedbackLink",computed:{href:()=>"https://owncloud.com/web-design-feedback",ariaLabel(){return this.$gettext("ownCloud feedback survey")},description(){return this.$gettext("Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.")}}};var h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-flex uk-flex-middle"},[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.description,expression:"description"}],attrs:{type:"a",href:e.href,target:"_blank",appearance:"raw","aria-label":e.ariaLabel,"aria-describedby":"oc-feedback-link-description"}},[i("oc-icon",{attrs:{name:"feedback"}})],1),e._v(" "),i("p",{staticClass:"oc-invisible-sr",attrs:{id:"oc-feedback-link-description"},domProps:{textContent:e._s(e.description)}})],1)};h._withStripped=!0;const f={components:{FeedbackLink:t.normalizeComponent({render:h,staticRenderFns:[]},undefined,g,undefined,false,undefined,!1,void 0,void 0,void 0),Notifications:m,ApplicationsMenu:r,UserMenu:u},props:{userId:{type:String,required:!1,default:""},userDisplayName:{type:String,required:!1,default:""},applicationsList:{type:Array,required:!1,default:()=>[]},hasAppNavigation:{type:Boolean,required:!1,default:!1},activeNotifications:{type:[Array,Boolean],required:!1,default:()=>[]}},computed:{...t.mapGetters(["configuration"]),isFeedbackLinkEnabled(){return!this.configuration.options.disableFeedbackLink}},methods:{toggleAppNavigationVisibility(){this.$emit("toggleAppNavigationVisibility")}}};var v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{staticClass:"oc-topbar uk-flex uk-flex-middle uk-flex-wrap oc-border-b oc-p-s",attrs:{"aria-label":e.$gettext("Top bar")}},[i("oc-grid",{attrs:{gutter:"medium",flex:""}},[i("div",{staticClass:"uk-hidden@l"},[i("oc-button",{staticClass:"oc-m-s oc-app-navigation-toggle",attrs:{appearance:"raw","aria-label":e.$gettext("Open navigation menu")},on:{click:e.toggleAppNavigationVisibility}},[i("oc-icon",{attrs:{name:"menu"}})],1)],1)]),e._v(" "),i("div",{staticClass:"portal-wrapper"},[i("portal-target",{attrs:{name:"app.runtime.header",multiple:""}})],1),e._v(" "),i("oc-grid",{staticClass:"uk-width-expand uk-flex-right oc-m-rm",attrs:{flex:"",gutter:"small"}},[e.isFeedbackLinkEnabled?i("feedback-link"):e._e(),e._v(" "),e.activeNotifications.length?i("notifications"):e._e(),e._v(" "),e.applicationsList.length>0?i("applications-menu",{attrs:{"applications-list":e.applicationsList}}):e._e(),e._v(" "),i("user-menu",{attrs:{"user-id":e.userId,"user-display-name":e.userDisplayName,"applications-list":e.applicationsList}})],1)],1)};v._withStripped=!0;const b=t.normalizeComponent({render:v,staticRenderFns:[]},undefined,f,"data-v-0176f779",false,undefined,!1,void 0,void 0,void 0);const _={props:{activeMessages:{type:Array,required:!1,default:()=>[]}},computed:{$_ocMessages_limited(){return this.activeMessages?this.activeMessages.slice(0,5):[]}},methods:{deleteMessage(e){this.$emit("deleteMessage",e)}}};var w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("oc-notifications",[i("transition-group",{attrs:{name:"oc-alerts-transition",tag:"div"}},e._l(e.$_ocMessages_limited,(function(t){return i("oc-notification-message",{key:t.id,staticClass:"uk-width-large",attrs:{title:e.$gettext(t.title),message:e.$gettext(t.desc),status:t.status},on:{close:function(i){return e.deleteMessage(t)}}})})),1)],1)};w._withStripped=!0;const k=t.normalizeComponent({render:w,staticRenderFns:[]},undefined,_,undefined,false,undefined,!1,void 0,void 0,void 0);const E={props:{target:{type:String,required:!0}},computed:{targetElement(){return document.getElementById(this.target)}},methods:{skipToTarget(){this.targetElement.setAttribute("tabindex","-1"),this.targetElement.focus(),this.targetElement.scrollIntoView()}}};var y=function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"skip-button",on:{click:e.skipToTarget}},[e._t("default")],2)};y._withStripped=!0;const S=({store:e})=>{const t=e.getters.user.version;if(!t||!t.string)return;return`${t.product||"ownCloud"} ${t.string} ${t.edition}`};const A={components:{MessageBar:k,TopBar:b,SkipTo:t.normalizeComponent({render:y,staticRenderFns:[]},undefined,E,"data-v-7d862d28",false,undefined,!1,void 0,void 0,void 0),FocusTrap:t.FocusTrap},data:()=>({appNavigationVisible:!1,$_notificationsInterval:null,windowWidth:0,announcement:""}),computed:{...t.mapState(["route","user","modal","sidebar"]),...t.mapGetters(["configuration","activeNotifications","activeMessages","capabilities","apps","getSettingsValue","getNavItemsByExtension","getExtensionsWithNavItems"]),applicationsList(){const e=[];return this.getExtensionsWithNavItems.forEach((t=>{e.push({...this.apps[t],type:"extension"})})),this.configuration.applications.forEach((t=>{e.push({...t,type:"link"})})),e},showHeader(){return!0!==this.$route.meta.hideHeadbar},favicon(){return this.configuration.theme.logo.favicon},logoImage(){return this.configuration.theme.logo.sidebar},sidebarLogoAlt(){return this.$gettext("Navigate to all files page")},sidebarNavItems(){if(this.publicPage())return[];const e=this.getNavItemsByExtension(this.currentExtension);return e?(e.filter((e=>void 0!==this.capabilities&&(void 0===e.enabled||e.enabled(this.capabilities)))),e.map((e=>({...e,name:this.$gettext(e.name),active:this.$route.name===e.route.name})))):[]},sidebarClasses(){return this.appNavigationVisible?"":"uk-visible@l"},isSidebarFixed(){return this.windowWidth<=960},isSidebarVisible(){return 0!==this.sidebarNavItems.length&&(this.windowWidth>=1200||this.appNavigationVisible)},appNavigationAnimation(){return this.windowWidth>1200?null:this.windowWidth>960?"push-right":"fade"},selectedLanguage(){return this.getSettingsValue({extension:"ocis-accounts",bundle:"profile",setting:"language"})}},watch:{$route:{immediate:!0,handler:function(e){this.announceRouteChange(e),document.title=this.extractPageTitleFromRoute(e),this.appNavigationVisible=!1}},capabilities:{immediate:!0,handler:function(e){e?.notifications&&(this.$nextTick((()=>{this.$_updateNotifications()})),this.$_notificationsInterval=setInterval((()=>{this.$_updateNotifications()}),3e4))}},selectedLanguage:{immediate:!0,handler(e){let t=this.$language.defaultLanguage;null!==e&&e.listValue.values.length>0&&(t=e.listValue.values[0].stringValue),t&&(this.$language.current=t,document.documentElement.lang=t)}}},beforeDestroy(){window.removeEventListener("resize",this.onResize)},destroyed(){this.$_notificationsInterval&&clearInterval(this.$_notificationsInterval)},metaInfo(){const e={};this.favicon&&(e.link=[{rel:"icon",href:this.favicon}]);const t={name:"generator",content:["ownCloud Web UI 4.9.0",S({store:this.$store})].filter(Boolean).join(", ")};return e.meta=[t],e},mounted(){this.$nextTick((()=>{window.addEventListener("resize",this.onResize),this.onResize()}))},methods:{...t.mapActions(["fetchNotifications","deleteMessage"]),focusModal(e,t){this.focus({revert:"beforeDestroy"===t})},hideAppNavigation(){this.appNavigationVisible=!1},toggleAppNavigationVisibility(){this.appNavigationVisible=!this.appNavigationVisible,this.appNavigationVisible&&this.$nextTick((()=>{this.$refs.navigationSidebarLogo.$el.focus()}))},$_updateNotifications(){this.fetchNotifications(this.$client).catch((e=>{console.error("Error while loading notifications: ",e),clearInterval(this.$_notificationsInterval)}))},$_deleteMessage(e){this.deleteMessage(e)},onResize(){const e=window.innerWidth;e>=1200&&(this.appNavigationVisible=!1),this.windowWidth=e},handleNavSwipe(){this.windowWidth<=960||this.windowWidth>1200||(this.appNavigationVisible=!1)},announceRouteChange(e){const t=this.extractPageTitleFromRoute(e,!1),i=this.$gettext("Navigated to %{ pageTitle }");this.announcement=this.$gettextInterpolate(i,{pageTitle:t})},extractPageTitleFromRoute(e,t=!0){const i=[e.meta.title?this.$gettext(e.meta.title):e.name];if(t&&i.push(this.configuration.theme.general.name),e.params.item)if(e.name.startsWith("files-")){const t=e.params.item.split("/").filter((e=>e.length));t.length&&i.unshift(t.pop())}else i.unshift(e.params.item);return i.join(" - ")}}};var I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"web"}},[i("oc-hidden-announcer",{attrs:{announcement:e.announcement,level:"polite"}}),e._v(" "),i("skip-to",{attrs:{target:"main"}},[i("translate",[e._v("Skip to main")])],1),e._v(" "),e.user.isAuthenticated&&!e.user.userReady?i("div",{staticClass:"loading-overlay uk-flex uk-flex-middle uk-flex-center",style:{backgroundImage:"url("+e.configuration.theme.loginPage.backgroundImg+")"}},[i("oc-spinner",{attrs:{size:"xlarge","aria-label":e.$gettext("Loading")}})],1):e.showHeader?i("div",{key:"core-content",staticClass:"uk-flex uk-flex-stretch",attrs:{id:"web-content"}},[i("transition",{attrs:{name:e.appNavigationAnimation}},[e.isSidebarVisible?i("focus-trap",{attrs:{active:e.isSidebarFixed&&e.appNavigationVisible}},[i("oc-sidebar-nav",{directives:[{name:"show",rawName:"v-show",value:e.isSidebarVisible,expression:"isSidebarVisible"},{name:"touch",rawName:"v-touch:swipe.left",value:e.handleNavSwipe,expression:"handleNavSwipe",arg:"swipe",modifiers:{left:!0}}],staticClass:"oc-app-navigation",class:e.sidebarClasses,attrs:{id:"web-nav-sidebar","accessible-label-header":e.$gettext("Sidebar header"),"accessible-label-nav":e.$gettext("Sidebar navigation menu"),"accessible-label-footer":e.$gettext("Sidebar footer")},scopedSlots:e._u([{key:"header",fn:function(){return[i("div",{staticClass:"uk-text-center"},[e.isSidebarFixed?i("oc-button",{staticClass:"web-sidebar-btn-close",attrs:{variation:"inverse",appearance:"raw","aria-label":e.$gettext("Close sidebar")},on:{click:e.toggleAppNavigationVisibility}},[i("oc-icon",{attrs:{name:"close"}})],1):e._e(),e._v(" "),i("router-link",{ref:"navigationSidebarLogo",attrs:{to:"/"}},[i("oc-logo",{attrs:{src:e.logoImage,alt:e.sidebarLogoAlt}})],1)],1)]},proxy:!0},{key:"nav",fn:function(){return[i("oc-list",e._l(e.sidebarNavItems,(function(t){return i("oc-sidebar-nav-item",{key:t.route.path,attrs:{active:t.active,target:t.route.path,icon:t.icon||t.iconMaterial}},[e._v("\n                "+e._s(t.name)+"\n              ")])})),1)]},proxy:!0},e.sidebar.sidebarFooterContentComponent?{key:"footer",fn:function(){return[i(e.sidebar.sidebarFooterContentComponent,{tag:"component"})]},proxy:!0}:null],null,!0)})],1):e._e()],1),e._v(" "),i("div",{staticClass:"uk-width-expand web-content-container"},[e.publicPage()||e.$route.meta.verbose?e._e():i("top-bar",{staticClass:"uk-width-expand",attrs:{id:"oc-topbar","applications-list":e.applicationsList,"active-notifications":e.activeNotifications,"user-id":e.user.username||e.user.id,"user-display-name":e.user.displayname},on:{toggleAppNavigationVisibility:e.toggleAppNavigationVisibility}}),e._v(" "),i("div",{attrs:{id:"main"}},[i("message-bar",{attrs:{"active-messages":e.activeMessages},on:{deleteMessage:e.$_deleteMessage}}),e._v(" "),i("router-view",{staticClass:"oc-app-container",attrs:{name:"app"}})],1)],1)],1):[i("router-view",{attrs:{name:"fullscreen"}})],e._v(" "),i("transition",{attrs:{"enter-active-class":"uk-animation-fade uk-animation-fast","leave-active-class":"uk-animation-fade uk-animation-reverse uk-animation-fast",name:"custom-classes-transition"}},[e.modal.displayed?i("oc-modal",{attrs:{variation:e.modal.variation,icon:e.modal.icon,title:e.modal.title,message:e.modal.message,"has-input":e.modal.hasInput,"input-label":e.modal.inputLabel,"input-disabled":e.modal.inputDisabled,"input-value":e.modal.inputValue,"input-description":e.modal.inputDescription,"input-error":e.modal.inputError,"button-cancel-text":e.modal.cancelText,"button-confirm-text":e.modal.confirmText,"button-confirm-disabled":e.modal.confirmDisabled||!!e.modal.inputError},on:{cancel:e.modal.onCancel,confirm:e.modal.onConfirm,input:e.modal.onInput,mounted:e.focusModal,beforeDestroy:e.focusModal}}):e._e()],1)],2)};I._withStripped=!0;const C=t.normalizeComponent({render:I,staticRenderFns:[]},undefined,A,undefined,false,undefined,!1,void 0,void 0,void 0);const x={name:"MissingConfigPage",computed:{...t.mapGetters(["configuration"]),backgroundImg(){return this.configuration.theme.loginPage.backgroundImg},logoImg(){return this.configuration.theme.logo.login},favicon(){return this.configuration.theme.logo.favicon}},metaInfo(){const e={};this.favicon&&(e.link=[{rel:"icon",href:this.favicon}]);const t={name:"generator",content:["ownCloud Web UI 4.9.0",S({store:this.$store})].filter(Boolean).join(", ")};return e.meta=[t],e}};var N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-height-1-1",style:{backgroundImage:"url("+e.backgroundImg+")"},attrs:{id:"Web"}},[i("div",{staticClass:"oc-login",attrs:{"uk-height-viewport":""}},[i("div",{staticClass:"oc-login-card uk-position-center"},[i("img",{staticClass:"oc-login-logo",attrs:{src:e.logoImg,alt:"","aria-hidden":!0}}),e._v(" "),i("div",{staticClass:"oc-login-card-body"},[i("h1",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-login-card-title"},[e._v("Missing or invalid config")]),e._v(" "),i("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Please check if the file config.json exists and is correct.")]),e._v(" "),i("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Also, make sure to check the browser console for more information.")])]),e._v(" "),i("div",{staticClass:"oc-login-card-footer"},[i("p",[i("translate",[e._v("For help visit our")]),e._v(" "),i("a",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{href:"https://owncloud.dev/clients/web",target:"_blank"}},[e._v("documentation")]),e._v(" "),i("translate",[e._v("or join our")]),e._v(" "),i("a",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{href:"https://talk.owncloud.com/channel/web",target:"_blank"}},[e._v("chat")]),e._v(".\n        ")],1)])])])])};N._withStripped=!0;const T=t.normalizeComponent({render:N,staticRenderFns:[]},undefined,x,undefined,false,undefined,!1,void 0,void 0,void 0);var L={state:{messages:[],notifications:{loading:!0,failed:!1,data:[]},quickActions:{}},actions:{toggleSidebar(e,t){e.commit("TOGGLE_SIDEBAR",t)},showMessage({commit:e},t){e("ENQUEUE_MESSAGE",t)},deleteMessage(e,t){e.commit("REMOVE_MESSAGE",t)},fetchNotifications:(e,t)=>(e.commit("LOADING_NOTIFICATIONS",!0),t.requests.ocs({service:"apps/notifications",action:"api/v1/notifications"}).then((t=>{"0"!==t.headers.get("Content-Length")&&t.json().then((i=>{t.ok?e.commit("UPDATE_NOTIFICATIONS",i.ocs.data):e.commit("ERROR_NOTIFICATIONS",i.ocs.meta.message),e.commit("LOADING_NOTIFICATIONS",!1)}))})).catch((t=>{e.commit("ERROR_NOTIFICATIONS",t),e.commit("LOADING_NOTIFICATIONS",!1)}))),deleteNotification(e,{client:t,notification:i}){t.requests.ocs({service:"apps/notifications",action:"api/v1/notifications/"+i,method:"DELETE"}).then((t=>{t.ok?e.commit("DELETE_NOTIFICATION",i):e.commit("ERROR_NOTIFICATIONS",t.ocs.meta.status)})).catch((t=>{e.commit("ERROR_NOTIFICATIONS",t)}))}},mutations:{ENQUEUE_MESSAGE(e,t){t.id||(t.id=Math.random().toString(36).slice(2,-1)),e.messages.push(t)},REMOVE_MESSAGE(e,t){e.messages.splice(e.messages.indexOf(t),1)},LOADING_NOTIFICATIONS(e,t){e.notifications.loading=t},ERROR_NOTIFICATIONS(e,t){e.notifications.failed=t},UPDATE_NOTIFICATIONS(e,t){e.notifications.data=t},DELETE_NOTIFICATION(e,t){const i=e.notifications.data.filter((e=>e.notification_id!==t));e.notifications.data=i},ADD_QUICK_ACTIONS(e,t){e.quickActions=Object.assign(e.quickActions,t)}},getters:{activeMessages:e=>e.messages,activeNotifications:e=>!(!e.notifications.data.length||e.notifications.failed)&&e.notifications.data,isOcis:(e,t,i)=>"reva"===i.user.version.edition}};var P={state:{file:{path:"",edit:!1},fileEditors:[],newFileHandlers:[],fileSideBars:[],customFilesListIndicators:[],meta:{}},actions:{openFile:(e,t)=>new Promise(((i,a)=>{const n=t.filePath;e.commit("FETCH_FILE",n);const o=t.client||!1;o?o.files.getFileContents(n).then(i).catch(a):i()})),registerApp({commit:e},t){e("REGISTER_APP",t)},addFileAction({commit:e},t){e("ADD_FILE_ACTION",t)}},mutations:{REGISTER_EXTENSION(e,t){const{app:i,extension:a}=t,n={app:i,icon:a.icon,img:a.img,newTab:a.newTab||!1,routeName:a.routeName,routes:a.routes||[],extension:a.extension,handler:a.handler,canBeDefault:!1!==a.canBeDefault};e.fileEditors.push(n),a.newFileMenu&&(a.newFileMenu.ext=a.extension,a.newFileMenu.action=n,a.newFileMenu.routes=a.routes,e.newFileHandlers.push(a.newFileMenu))},REGISTER_APP(e,t){if(t.extensions&&t.extensions.forEach((e=>{this.commit("REGISTER_EXTENSION",{app:t.id,extension:e})})),t.fileSideBars){const i=e.fileSideBars;t.fileSideBars.forEach((e=>{i.push(e)})),e.fileSideBars=i}if(t.filesListIndicators){const i=e.customFilesListIndicators;t.filesListIndicators.forEach((e=>{i.push(e)})),e.customFilesListIndicators=i}if(!t.id)return;const i={name:t.name||t.id,id:t.id,icon:t.icon||"check_box_outline_blank",img:t.img||null};e.meta[i.id]=i},FETCH_FILE(e,t){e.file.path=t},LOAD_EXTENSION_CONFIG(e,{id:t,config:i}){const a=[...e.fileEditors];for(const e of a)e.app===t&&(e.config=i);if(e.fileEditors=a,e.meta[t]){const a={...e.meta};a[t].config=i,e.meta=a}}},getters:{appIds:e=>Object.keys(e.meta),apps:e=>e.meta,activeFile:e=>e.file,newFileHandlers:e=>e.newFileHandlers,fileSideBars:e=>e.fileSideBars,customFilesListIndicators:e=>e.customFilesListIndicators}};var $={state:{state:null,server:"",auth:{clientId:"",apiUrl:"",authUrl:"",metaDataUrl:""},openIdConnect:{authority:""},theme:{general:{name:"",slogan:"",helpDeskText:"",helpDeskLink:"",helpDeskLinkText:"ownCloud Central"},logo:{sidebar:"",favicon:"",login:"",notFound:""},loginPage:{autoRedirect:!0,backgroundImg:""}},options:{defaultExtension:"files",homeFolder:"",disablePreviews:!1,previewFileExtensions:[],sharingRecipientsPerPage:200}},actions:{loadConfig({commit:e},t){e("LOAD_CONFIG",t),t.external_apps&&t.external_apps.forEach((t=>{void 0!==t.config&&e("LOAD_EXTENSION_CONFIG",{id:t.id,config:t.config},{root:!0})}))},loadTheme(e,{theme:t}){e.commit("LOAD_THEME",t)}},mutations:{LOAD_CONFIG(e,t){e.server=t.server.endsWith("/")?t.server:t.server+"/",e.auth=t.auth,e.openIdConnect=t.openIdConnect,e.uploadChunkSize=void 0===t.uploadChunkSize?1/0:t.uploadChunkSize,e.state=void 0===t.state?"working":t.state,e.applications=void 0===t.applications?[]:t.applications,void 0!==t.options&&(e.options={...e.options,...t.options}),t.corrupted&&(e.corrupted=t.corrupted)},LOAD_THEME(e,i){e.theme=t.merge({},e.theme,i)}},getters:{configuration:e=>e,previewFileExtensions:e=>{const t=e.options.previewFileExtensions;return(Array.isArray(t)?t:[]).filter(Boolean).map((e=>e.toLowerCase()))},homeFolder:(e,i)=>{if(t.isEmpty(e.options.homeFolder))return"/";const a=function(e,i){const a=/{{(.*?)}}/g,n=e.match(a);n&&n.forEach((a=>{const n=/{{substr\s([0-9]+)\s([0-9]+)\s\.(.*)}}/,o=a.match(n);if(!t.isEmpty(o)&&o.length>=4){const t=parseInt(o[1],10),n=parseInt(o[2],10),s=O(o[3],i);return void(e=e.replace(a,s.substring(t,t+n)))}const s=/{{\.(.*)}}/,r=a.match(s);!t.isEmpty(r)&&r.length>=2&&(e=e.replace(a,O(r[1],i)))}));return e}(e.options.homeFolder,i.user);return a.indexOf("//")>-1?"/":a},theme:e=>e.theme}};function O(e,t){return t[e.toLowerCase()]||""}function F(e){if(e){const i=new t.oidcClient_min.WebStorageStateStore({prefix:"oc_oAuth",store:sessionStorage});let a=window.location.href.split("#")[0];a.endsWith("/index.html")&&(a=a.substr(0,a.length-10));const n={userStore:i,redirect_uri:a+"oidc-callback.html",response_type:"code",response_mode:"query",scope:"openid profile offline_access",monitorSession:!1,post_logout_redirect_uri:a+"#/login",silent_redirect_uri:a+"oidc-silent-redirect.html",accessTokenExpiringNotificationTime:10,automaticSilentRenew:!0,filterProtocolClaims:!0,loadUserInfo:!0,logLevel:t.oidcClient_min.Log.INFO};e.openIdConnect&&e.openIdConnect.authority?Object.assign(n,e.openIdConnect):e.auth.metaDataUrl?Object.assign(n,{authority:e.auth.url,metadataUrl:e.auth.metaDataUrl,client_id:e.auth.clientId}):Object.assign(n,{authority:e.auth.url,metadata:{issuer:e.auth.url,authorization_endpoint:e.auth.authUrl,token_endpoint:e.auth.url,userinfo_endpoint:""},client_id:e.auth.clientId,response_type:"token",scope:"openid profile",loadUserInfo:!1});const o=new t.oidcClient_min.UserManager(n);return t.oidcClient_min.Log.logger=console,t.oidcClient_min.Log.level=n.logLevel,o.events.addUserSignedOut((function(){console.log("UserSignedOut：",arguments)})),{authenticate:()=>o.signinRedirect(),getToken(){const e=sessionStorage.getItem("oc_oAuth"+o._userStoreKey);if(e){const i=t.oidcClient_min.User.fromStorageString(e);if(i)return o.events.load(i,!1),i.access_token}return null},getStoredUserObject(){const e=sessionStorage.getItem("oc_oAuth"+o._userStoreKey);if(e){const i=t.oidcClient_min.User.fromStorageString(e);if(i)return o.events.load(i,!1),i}return null},isAuthenticated(){return null!==this.getToken()},createSignoutRequest:e=>new Promise(((t,i)=>{o.createSignoutRequest(e).then((e=>t(e.url))).catch((e=>i(e)))})),clearLoginState:()=>o.removeUser(),mgr:o,events:()=>o.events}}}const R={name:"LoginPage",data:()=>({loading:!1,initialized:!1}),computed:{...t.mapGetters(["configuration"]),pageTitle(){return this.$gettext(this.$route.meta.title)},$_productName(){return this.configuration.theme.general.name},logoImg(){return this.configuration.theme.logo.login},backgroundImg(){return this.configuration.theme.loginPage.backgroundImg}},created(){this.configuration.theme.loginPage.autoRedirect?this.login():this.initialized=!0},methods:{...t.mapActions(["login"])}};var D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.initialized?i("div",{staticClass:"oc-login",style:{backgroundImage:"url("+e.backgroundImg+")"},attrs:{"uk-height-viewport":""}},[i("h1",{staticClass:"oc-invisible-sr"},[e._v(e._s(e.pageTitle))]),e._v(" "),i("div",{staticClass:"oc-login-card uk-position-center"},[i("img",{staticClass:"oc-login-logo",attrs:{src:e.logoImg,alt:"","aria-hidden":!0}}),e._v(" "),i("div",{staticClass:"oc-login-card-body"},[i("h2",{staticClass:"oc-login-card-title"},[i("translate",{attrs:{"translate-params":{productName:e.$_productName}}},[e._v("Welcome to %{productName}")])],1),e._v(" "),i("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n        Please click the button below to authenticate and get access to your data.\n      ")]),e._v(" "),i("oc-button",{staticClass:"oc-login-authorize-button",attrs:{id:"authenticate",size:"large",variation:"primary",appearance:"filled"},on:{click:function(t){return e.login()}}},[i("translate",[e._v("Login")])],1)],1),e._v(" "),i("div",{staticClass:"oc-login-card-footer"},[i("p",[e._v("\n        "+e._s(e.configuration.theme.general.slogan)+"\n      ")])])])]):e._e()};D._withStripped=!0;const M=t.normalizeComponent({render:D,staticRenderFns:[]},undefined,R,undefined,false,undefined,!1,void 0,void 0,void 0);const V={name:"OidcCallbackPage",data:()=>({error:!1}),computed:{...t.mapGetters(["configuration"]),pageTitle(){return this.$gettext(this.$route.meta.title)},backgroundImg(){return this.configuration.theme.loginPage.backgroundImg},logoImg(){return this.configuration.theme.logo.login}},mounted(){this.$nextTick((()=>{if(this.$route.query.error)return this.error=!0,void console.warn("OAuth error: "+this.$route.query.error+" - "+this.$route.query.error_description);"/oidc-silent-redirect"===this.$route.path?this.signinSilentCallback():this.callback()}))},methods:{...t.mapActions(["callback","signinSilentCallback"])}};var U=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-login",style:{backgroundImage:"url("+e.backgroundImg+")"},attrs:{"uk-height-viewport":""}},[i("h1",{staticClass:"oc-invisible-sr"},[e._v(e._s(e.pageTitle))]),e._v(" "),i("div",{staticClass:"oc-login-card uk-position-center"},[i("img",{staticClass:"oc-login-logo",attrs:{src:e.logoImg,alt:"","aria-hidden":!0}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"oc-login-card-body"},[i("h2",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-login-card-title"},[e._v("Authentication failed")]),e._v(" "),i("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Please contact the administrator if this error persists.")])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.error,expression:"!error"}],staticClass:"oc-login-card-body"},[i("h3",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-login-card-title"},[e._v("Logging you in")]),e._v(" "),i("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Please wait, you are being redirected.")])]),e._v(" "),i("div",{staticClass:"oc-login-card-footer"},[i("p",[e._v(e._s(e.configuration.theme.general.slogan))])])])])};U._withStripped=!0;const z=t.normalizeComponent({render:U,staticRenderFns:[]},undefined,V,undefined,false,undefined,!1,void 0,void 0,void 0);const B={name:"AccessDeniedPage",computed:{...t.mapGetters(["configuration"]),pageTitle(){return this.$gettext(this.$route.meta.title)},helpDeskText(){if(this.configuration.theme.general.helpDeskText&&this.configuration.theme.general.helpDeskText.en){const e=this.$language.current;return this.configuration.theme.general.helpDeskText[e]?this.configuration.theme.general.helpDeskText[e]:this.configuration.theme.general.helpDeskText.en}return this.$gettext("Please contact your administrator if you think this message shows up in error.")},helpDeskLink(){return this.configuration.theme.general.helpDeskLink?this.configuration.theme.general.helpDeskLink:""},helpDeskLinkText(){return this.configuration.theme.general.helpDeskLinkText?this.configuration.theme.general.helpDeskLinkText:""},logoImg(){return this.configuration.theme.logo.login},backgroundImg(){return this.configuration.theme.loginPage.backgroundImg}},methods:{...t.mapActions(["logout"]),performLogout(e){"exitAnchor"===e.target.id&&this.logout()}}};var q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-login",style:{backgroundImage:"url("+e.backgroundImg+")"},attrs:{"uk-height-viewport":""}},[i("h1",{staticClass:"oc-invisible-sr"},[e._v(e._s(e.pageTitle))]),e._v(" "),i("div",{staticClass:"oc-login-card uk-position-center"},[i("img",{staticClass:"oc-login-logo",attrs:{src:e.logoImg,alt:"","aria-hidden":!0}}),e._v(" "),i("div",{staticClass:"oc-login-card-body uk-width-large"},[i("h3",{staticClass:"oc-login-card-title"},[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Login Error")])]),e._v(" "),i("h4",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-mb-m"},[e._v("Your user session is invalid or has expired.")]),e._v(" "),i("div",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-mb-m",on:{click:e.performLogout}},[e._v("\n        If you like to login with a different user please proceed to "),i("a",{attrs:{id:"exitAnchor"}},[e._v("exit")]),e._v(".\n      ")]),e._v(" "),i("div",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-m-rm"},[i("strong",[e._v("Attention:")]),e._v(" this will log you out from all applications you are running in\n        this browser with your current user.\n      ")])]),e._v(" "),i("div",{staticClass:"oc-login-card-footer uk-width-large"},[i("p",[e._v("\n        "+e._s(e.helpDeskText)+"\n        "),e.helpDeskLink?i("a",{attrs:{href:e.helpDeskLink},domProps:{textContent:e._s(e.helpDeskLinkText)}}):e._e()])])])])};q._withStripped=!0;const j=t.normalizeComponent({render:q,staticRenderFns:[]},undefined,B,undefined,false,undefined,!1,void 0,void 0,void 0);const G={name:"Personal",data:()=>({loading:!0,groups:[]}),computed:{...t.mapGetters(["user","configuration","getNavItemsByExtension","isOcis"]),pageTitle(){return this.$gettext(this.$route.meta.title)},editUrl(){return this.isOcis?null:this.configuration.server.replace(/\/$/,"")+"/index.php/settings/personal"},editRoute(){const e=this.getNavItemsByExtension("settings");return e.length>0?e[0].route||{}:null},groupNames(){return this.groups.join(", ")}},mounted(){this.$_oc_settingsAccount_getGroup()},methods:{$_oc_settingsAccount_getGroup(){this.$client.users.getUserGroups(this.user.id).then((e=>{this.groups=e,this.loading=!1}))}}};var W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-width-1-1 uk-container oc-p"},[e.loading?i("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle"},[i("h1",{staticClass:"oc-page-title"},[e._v(e._s(e.pageTitle))]),e._v(" "),i("oc-loader")],1):[i("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle"},[i("h1",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-page-title",attrs:{id:"account-page-title"}},[e._v("Account")]),e._v(" "),e.editUrl?i("oc-button",{attrs:{variation:"primary",type:"a",href:e.editUrl}},[i("oc-icon",{attrs:{name:"edit"}}),e._v(" "),i("translate",[e._v("Edit")])],1):e.editRoute?i("oc-button",{attrs:{variation:"primary",type:"router-link",to:e.editRoute}},[i("oc-icon",{attrs:{name:"edit"}}),e._v(" "),i("translate",[e._v("Edit")])],1):e._e()],1),e._v(" "),i("hr"),e._v(" "),i("h2",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-text-bold oc-text-initial oc-mb"},[e._v("Account Information")]),e._v(" "),i("dl",{staticClass:"account-page-info uk-flex uk-flex-wrap"},[i("div",{staticClass:"oc-mb uk-width-1-2@s"},[i("dt",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"account-page-info-username uk-text-normal oc-text-muted"},[e._v("\n          Username\n        ")]),e._v(" "),i("dd",[e._v("\n          "+e._s(e.user.username||e.user.id)+"\n        ")])]),e._v(" "),e.user.username&&e.user.id?i("div",[i("dt",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"account-page-info-userid uk-text-normal oc-text-muted"},[e._v("User ID")]),e._v(" "),i("dd",[e._v("\n          "+e._s(e.user.id)+"\n        ")])]):e._e(),e._v(" "),i("div",{staticClass:"oc-mb uk-width-1-2@s"},[i("dt",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"account-page-info-displayname uk-text-normal oc-text-muted"},[e._v("\n          Display name\n        ")]),e._v(" "),i("dd",[e._v("\n          "+e._s(e.user.displayname)+"\n        ")])]),e._v(" "),i("div",{staticClass:"oc-mb uk-width-1-2@s"},[i("dt",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"account-page-info-email uk-text-normal oc-text-muted"},[e._v("Email")]),e._v(" "),i("dd",[e.user.email?[e._v(e._s(e.user.email))]:i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("No email has been set up")])],2)]),e._v(" "),i("div",{staticClass:"oc-mb uk-width-1-2@s"},[i("dt",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"account-page-info-groups uk-text-normal oc-text-muted",on:{click:e.$_oc_settingsAccount_getGroup}},[e._v("\n          Group memberships\n        ")]),e._v(" "),i("dd",[e.groupNames?i("span",[e._v(e._s(e.groupNames))]):i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("You are not part of any group")])])])])]],2)};W._withStripped=!0;const H=t.normalizeComponent({render:W,staticRenderFns:[]},undefined,G,undefined,false,undefined,!1,void 0,void 0,void 0);t.Vue.use(t.VueRouter);const K=new t.VueRouter({routes:[{path:"/login",name:"login",components:{fullscreen:M},meta:{auth:!1,hideHeadbar:!0,title:"Login"}},{path:"/oidc-callback",components:{fullscreen:z},meta:{auth:!1,hideHeadbar:!0,title:"Oidc callback"}},{path:"/oidc-silent-redirect",components:{fullscreen:z},meta:{auth:!1,hideHeadbar:!0,title:"Oidc redirect"}},{path:"/f/:fileId",name:"privateLink",redirect:"/files/private-link/:fileId",meta:{hideHeadbar:!0,title:"Private link"}},{path:"/s/:token",name:"publicLink",redirect:"/files/public-link/:token",meta:{auth:!1,hideHeadbar:!0,title:"Public link"}},{path:"/access-denied",name:"accessDenied",components:{fullscreen:j},meta:{auth:!1,hideHeadbar:!0,title:"Access denied"}},{path:"/account",name:"account",components:{app:H},meta:{title:"Account"}}]});K.beforeEach((function(e,i,a){const n=t.Vue.$store,o=n.getters.isAuthenticated;let s=!0;if(!1===e.meta.auth&&(s=!1),s)if(o){const e=n.getters.urlBeforeLogin;n.dispatch("saveUrlBeforeLogin",null),e?a(e):a()}else n.dispatch("saveUrlBeforeLogin",e.fullPath),a("/login");else a()}));var Y=(e=>{const i=e.match.bind(e),a=e=>[["%2F","/"],["//","/"]].reduce(((e,t)=>e.replaceAll(t[0],t[1])),e||"");return e.match=(e,n,o)=>{const s=i(e,n,o);return t.get(s,"meta.patchCleanPath",!1)?{...s,path:a(s.path),fullPath:a(s.fullPath)}:s},e})(K);const Q={name:"SidebarQuota",computed:{...t.mapGetters(["quota"]),usedQuota(){return e=(e=this.quota.used)<0?0:e,isNaN(e)?"?":t.filesize_min(e,{round:e<1048576?0:1});var e}}};var X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"uk-text-center"},[i("oc-progress",{staticClass:"oc-mb-xs",attrs:{value:e.quota.relative,max:100,size:"small"}}),e._v(" "),i("translate",{staticClass:"oc-light",attrs:{"translate-params":{used:e.usedQuota,total:e.quota.definition},"translate-comment":"Information about how much space has been used from users quota"}},[e._v("\n    %{used} of %{total}\n  ")])],1)};X._withStripped=!0;const Z=t.normalizeComponent({render:X,staticRenderFns:[]},undefined,Q,undefined,false,undefined,!1,void 0,void 0,void 0);let J;const ee={token:"",id:"",displayname:null,email:null,isAuthenticated:!1,capabilities:[],version:{},groups:[],userReady:!1,quota:null};var te={state:ee,actions:{cleanUpLoginState(e){""!==e.state.id&&(e.commit("SET_USER",ee),e.commit("SET_CAPABILITIES",{capabilities:null,version:null}),e.commit("SET_USER_READY",!1),J.clearLoginState())},async logout({dispatch:e}){const t=(t=!1)=>{e("cleanUpLoginState"),e("hideModal"),e("loadSettingsValues"),t&&Y.push({name:"login"})},i=await J.getStoredUserObject();i&&i.id_token?J.createSignoutRequest({id_token_hint:i.id_token}).then((e=>{t(),window.open(e,"_self")})).catch((e=>{console.error(e)})):t(!0)},async initAuth(e,t={autoRedirect:!1}){const i=async(i,a,n=!0)=>{const o={baseUrl:e.rootState.config.server||window.location.origin,auth:{bearer:a},headers:{"X-Requested-With":"XMLHttpRequest"}};if(e.state.id&&(o.userInfo={id:e.state.id,"display-name":e.state.displayname,email:e.state.email}),i.init(o),n){let n;try{n=await i.login()}catch(t){return console.warn("Seems that your token is invalid. Error:",t),e.dispatch("cleanUpLoginState"),void Y.push({name:"accessDenied"})}const o=await i.users.getUserGroups(n.id),s=await i.users.getUser(n.id);let r="";n&&n.email?r=n.email:s&&s.email&&(r=s.email),e.commit("SET_USER",{id:n.id,username:n.username,displayname:n.displayname||n["display-name"],email:r,token:a,isAuthenticated:!0,groups:o}),"default"!==s.quota.definition&&"none"!==s.quota.definition?(e.commit("SET_QUOTA",s.quota),e.commit("SET_SIDEBAR_FOOTER_CONTENT_COMPONENT",Z,{root:!0})):e.commit("SET_SIDEBAR_FOOTER_CONTENT_COMPONENT",null,{root:!0}),await e.dispatch("loadSettingsValues"),t.autoRedirect&&Y.push({path:"/"}).catch((()=>{}))}else e.commit("UPDATE_TOKEN",a);await e.dispatch("loadCapabilities",{token:a}),e.commit("SET_USER_READY",!0)};if(!J){J=F(e.rootState.config);const t=this._vm.$client;J.events().addAccessTokenExpired((function(){console.log("AccessToken Expired：",arguments)})),J.mgr.events.addAccessTokenExpiring((function(){console.log("AccessToken Expiring：",arguments)})),J.events().addUserLoaded((e=>{console.log(`New User Loaded. access_token： ${e.access_token}, refresh_token: ${e.refresh_token}`),i(t,e.access_token,!1)})),J.events().addUserUnloaded((()=>{console.log("user unloaded…"),e.dispatch("cleanUpLoginState"),Y.push({name:"login"})})),J.events().addSilentRenewError((t=>{console.error("Silent Renew Error：",t),e.dispatch("cleanUpLoginState"),Y.push({name:"accessDenied"})}))}const a=J.getToken();a&&await i(this._vm.$client,a)},login(e,t={provider:"oauth2"}){J=F(e.rootState.config),J.authenticate(t.provider,{},{}).then((()=>{J.isAuthenticated&&e.dispatch("initAuth")}))},callback(e){J||(J=F(e.rootState.config)),J.mgr.signinRedirectCallback().then((()=>{e.dispatch("initAuth",{autoRedirect:!0})})).catch((t=>{console.warn("error in OpenIdConnect:",t),e.dispatch("cleanUpLoginState"),Y.push({name:"accessDenied"})}))},signinSilentCallback(e){J||(J=F(e.rootState.config)),J.mgr.signinSilentCallback().then((()=>{e.dispatch("initAuth")}))},async loadCapabilities({commit:e,rootState:i,state:a},{token:n,publicToken:o,user:s,password:r,overwrite:l=!1}){if(!t.isEmpty(a.capabilities)&&!l)return;const c=new URL(i.config.server||window.location.origin);c.pathname=c.pathname.replace(/\/$/,"")+"/ocs/v1.php/cloud/capabilities",c.searchParams.append("format","json");const u={"X-Requested-With":"XMLHttpRequest",...o&&{"public-token":o},...s&&r&&{Authorization:"Basic "+t.Buffer.from([s,r].join(":")).toString("base64")},...n&&{Authorization:"Bearer "+n}},d=await fetch(c.href,{headers:u}),p=await d.json();e("SET_CAPABILITIES",t.get(p,"ocs.data",{capabilities:null,version:null}))}},mutations:{SET_USER(e,t){e.displayname=t.displayname,e.id=t.id,e.username=t.username,e.email=t.email,e.isAuthenticated=t.isAuthenticated,e.token=t.token,e.groups=t.groups},SET_CAPABILITIES(e,t){e.capabilities=t.capabilities,e.version=t.version},UPDATE_TOKEN(e,t){e.token=t},SET_USER_READY(e,t){e.userReady=t},SET_QUOTA(e,t){t.free=parseInt(t.free),t.relative=parseInt(t.relative),t.used=parseInt(t.used),t.total=parseInt(t.total),e.quota=t}},getters:{isAuthenticated:e=>e.isAuthenticated,isUserReady:e=>e.userReady,getToken:e=>e.token,user:e=>e,capabilities:e=>e.capabilities,quota:e=>e.quota}};var ie={state:{urlBeforeLogin:null},actions:{saveUrlBeforeLogin({commit:e},t){e("SAVE_URL_BEFORE_LOGIN",t)}},mutations:{SAVE_URL_BEFORE_LOGIN(e,t){e.urlBeforeLogin=t}},getters:{urlBeforeLogin:e=>e.urlBeforeLogin}};var ae={state:{settingsValues:null},actions:{async loadSettingsValues({commit:e,state:t,dispatch:i}){const a=t.settingsValues;e("SET_SETTINGS_VALUES",null);try{e("SET_SETTINGS_VALUES",await this._vm.$client.settings.getSettingsValues())}catch(t){e("SET_SETTINGS_VALUES",a),i("showMessage",{title:"Failed to load settings values.",desc:t.response.statusText,status:"danger",autoClose:{enabled:!0}})}}},mutations:{SET_SETTINGS_VALUES(e,i){e.settingsValues=null===i?null:t.keyBy(i,"value.id")},SET_SETTINGS_VALUE(e,i){e.settingsValues=t.assign({},e.settingsValues,{[i.value.id]:i})}},getters:{settingsValuesLoaded:e=>null!==e.settingsValues,hasSettingsValue:(e,t)=>({settingId:e,extension:i,bundle:a,setting:n})=>null!==t.getSettingsValue({settingId:e,extension:i,bundle:a,setting:n}),getSettingsValue:(e,i)=>({settingId:a,extension:n,bundle:o,setting:s})=>{if(!i.settingsValuesLoaded)return null;if(a){const i=t.findKey(e.settingsValues,(e=>e.value.settingId===a));return t.isNil(i)?null:e.settingsValues[i].value}const r=t.findKey(e.settingsValues,(e=>t.isEqual(e.identifier,{extension:n,bundle:o,setting:s})));return t.isNil(r)?null:e.settingsValues[r].value}}};const ne=()=>{};var oe={state:{displayed:!1,variation:"passive",icon:"",title:"",message:"",cancelText:"",confirmText:"",confirmDisabled:!1,hasInput:!1,inputDisabled:!1,inputValue:"",inputPlaceholder:"",inputLabel:"",inputError:"",onCancel:ne,onConfirm:ne,onInput:ne},actions:{createModal({commit:e},t){e("CREATE_MODAL",t)},hideModal({commit:e}){e("HIDE_MODAL")},setModalInputErrorMessage({commit:e},t){e("SET_INPUT_ERROR_MESSAGE",t)},toggleModalConfirmButton({commit:e}){e("TOGGLE_MODAL_CONFIRM_BUTTON")}},mutations:{CREATE_MODAL(e,t){e.displayed=!0,e.variation=t.variation||"passive",e.icon=t.icon,e.title=t.title,e.message=t.message,e.cancelText=t.cancelText||"Cancel",e.confirmText=t.confirmText||"Confirm",e.confirmDisabled=t.confirmDisabled||!1,e.onCancel=t.onCancel,e.onConfirm=t.onConfirm,e.hasInput=t.hasInput||!1,e.inputValue=t.inputValue||null,e.inputDescription=t.inputDescription||null,e.inputLabel=t.inputLabel||null,e.inputError=t.inputError||null,e.inputDisabled=t.inputDisabled||!1,e.onInput=t.onInput||ne},HIDE_MODAL(e){e.displayed=!1},SET_INPUT_ERROR_MESSAGE(e,t){e.inputError=t},TOGGLE_MODAL_CONFIRM_BUTTON(e){e.confirmDisabled=!e.confirmDisabled}}};var se={state:{staticNavItems:{},dynamicNavItems:{}},mutations:{SET_NAV_ITEMS_FROM_CONFIG(e,{extension:t,navItems:i}){const a=e.staticNavItems;a[t]=i,e.staticNavItems=a},ADD_NAV_ITEM(e,{extension:t,navItem:i}){const a={...e.dynamicNavItems};a[t]=a[t]||[];const n=a[t].findIndex((e=>e.route.path===i.route.path));n>=0?a[t][n]=i:a[t].push(i),e.dynamicNavItems=a}},getters:{getNavItemsByExtension:(e,t)=>i=>[...e.staticNavItems[i]||[],...e.dynamicNavItems[i]||[]].filter((e=>{if(!e.enabled)return!0;try{return e.enabled(t.capabilities)}catch(t){return console.error("`enabled` callback on navItem "+e.name+" threw an error",t),!1}})),getExtensionsWithNavItems:(e,t)=>[...new Set([...Object.keys(e.staticNavItems),...Object.keys(e.dynamicNavItems)])].filter((e=>t.getNavItemsByExtension(e).length>0))}};var re={state:{sidebarFooterContentComponent:null},mutations:{SET_SIDEBAR_FOOTER_CONTENT_COMPONENT(e,t){e.sidebarFooterContentComponent=t}}};var le={plugins:[new t.VuexPersistence({key:"webStateInSessionStorage",storage:window.sessionStorage,reducer:e=>{const{userReady:t,...i}=e.user;return{user:i,router:e.router}}}).plugin],modules:{app:L,apps:P,user:te,config:$,router:ie,settings:ae,modal:oe,navigation:se,sidebar:re},strict:!1};const ce={cs:{Account:"Účet","Account Information":"Informace o účtu","Application Switcher":"Přepínač Aplikací","Authentication failed":"Ověření selhalo",documentation:"dokumentace","Download failed":"Stahování selhalo",Edit:"Upravit","File could not be located":"Soubor se nepodařilo najít","For help visit our":"Pro pomoc navštivte naše",'If you like to login with a different user please proceed to <a id="exitAnchor">exit</a>.':'Pokud se chcete přihlásit jako jiný uživatel, pokračujte prosím <a id="exitAnchor">odhlášením</a>.',item:"položka","Loading folder failed…":"Načítání složky selhalo...","Log out":"Odhlásit",Login:"Přihlásit","Login Error":"Chyba přihlášení","No email has been set up":"Žádná emailová adresa nebyla nastavena",Notifications:"Oznámení","Please click the button below to authenticate and get access to your data.":"Stiskněte prosím tlačítko dole pro udělení oprávnění a zpřístupněte tak svá data.","Please contact the administrator if this error persists.":"Pokud tato chyba přetrvává, kontaktujte administrátora.","Please contact your administrator if you think this message shows up in error.":"Pokud si myslíte, že se tato zpráva zobrazuje omylem, kontaktujte svého administrátora.",Profile:"Profil","Public link":"Veřejný odkaz","Welcome to %{productName}":"Vítejte v %{productName}","You are not part of any group":"Nejste členem žádné skupiny"},de:{"{{ n.title }}":"{{ n.title }}","%{used} of %{total}":"%{used} von %{total}","<strong>Attention:</strong> this will log you out from all applications you are running in\n          this browser with your current user.":"<strong>Achtung:</strong> Sie werden automatischen aus allen Anwendungen ausgeloggt.","Access denied":"Zugriff verweigert",Account:"Konto","Account Information":"Kontoinformationen","Account menu":"Benutzer-Menü","Also, make sure to check the browser console for more information.":"Bitte prüfen Sie auch die Browser-Konsole für weitere Informationen.","Application Switcher":"Apps-Menü","Authentication failed":"Authentifizierung fehlgeschlagen",chat:"chat","Close sidebar":"Seitenleiste schließen","Display name":"Anzeigename",documentation:"Dokumentation","Download failed":"Fehler beim Herunterladen",Edit:"Bearbeiten",Email:"E-Mail","File could not be located":"Datei konnte nicht gefunden werden","For help visit our":"Für Hilfe besuche unsere","Group memberships":"Gruppenzugehörigkeiten",'If you like to login with a different user please proceed to <a id="exitAnchor">exit</a>.':'Wenn Sie sich mit einem anderen Benutzer anmelden möchten, gehen Sie bitte zu <a id="exitAnchor">exit</a>.',item:"Element",Loading:"Lädt","Loading folder failed…":"Laden des Ordners fehlgeschlagen…","Log out":"Abmelden","Logging you in":"Sie werden eingeloggt",Login:"Login","Login Error":"Fehler beim Login","Main navigation":"Hauptnavigation","Missing or invalid config":"Fehlende oder falsche Konfiguration",msg:"Nachricht",n:"n","Navigate to all files page":'Zur Seite "Alle Dateien" navigieren',"Navigated to %{ pageTitle }":"Zur Seite %{ pageTitle } navigiert","No email has been set up":"Es wurde noch keine E-Mail eingerichtet",Notifications:"Benachrichtigungen","Oidc callback":"Oidc Callback","Oidc redirect":"Oidc Weiterleitung","Open navigation menu":"Navigationsmenü öffnen","or join our":"oder machen Sie mit bei ","ownCloud feedback survey":"ownCloud Feedbackumfrage","Please check if the file config.json exists and is correct.":"Bitte prüfen Sie ob die config.json Konfigurationsdatei existiert und valide ist.","Please click the button below to authenticate and get access to your data.":"Klicken Sie auf die Schaltfläche unten, um sich zu authentifizieren und auf Ihre Daten zuzugreifen.","Please contact the administrator if this error persists.":"Bitte kontaktieren Sie den Administrator, wenn dieser Fehler weiterhin besteht.","Please contact your administrator if you think this message shows up in error.":"Falls diese Meldung fehlerhaft erscheint bitte die Systemverwaltung kontaktieren.","Please wait, you are being redirected.":"Bitte warten, Sie werden weitergeleitet","Private link":"Privater Link",Profile:"Profil","Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.":"Gib uns Feedback: Wir würden unser Webdesign gerne verbessern und freuen uns über deine Rückmeldung. Vielen Dank! Dein ownCloud Team.","Public link":"Öffentlicher Link",route:"Verbindung","Sidebar footer":"Fußzeile der Seitenleiste","Sidebar header":"Kopfbereich der Seitenleiste","Sidebar navigation menu":"Navigation in der Seitenleiste","Skip to main":"Zum Hauptinhalt springen",this:"dies","Top bar":"Kopfleiste","User ID":"Nutzer ID","User Menu":"Benutzermenü",Username:"Nutzername","Welcome to %{productName}":"Willkommen zu %{productName}","You are not part of any group":"Sie gehören keiner Gruppe an.","Your user session is invalid or has expired.":"Ihre Sitzung ist ungültig oder abgelaufen."},es:{"<strong>Attention:</strong> this will log you out from all applications you are running in\n          this browser with your current user.":"Atención: esto cerrará la sesión de todas las aplicaciones que está ejecutando en este navegador con el usuario actual.","Access denied":"Acceso denegado",Account:"Cuenta","Account Information":"Información de cuenta","Account menu":"Menú de la cuenta","Authentication failed":"Fallo de autenticación",chat:"chat","Close sidebar":"Cerrar barra lateral","Display name":"Nombre a mostrar",documentation:"documentación","Download failed":"Descarga fallida",Edit:"Editar",Email:"Correo electrónico","For help visit our":"Para ayuda visite nuestra",'If you like to login with a different user please proceed to <a id="exitAnchor">exit</a>.':'Si deseas entrar con un nombre de usuario distinto por favor procede a <a id="exitAnchor">salir</a>.',item:"item",Loading:"Cargando","Loading folder failed…":"Falló la subida de la carpeta...","Log out":"Salir",Login:"Iniciar sesión","Login Error":"Error de inicio de sesión",msg:"msg",n:"n","No email has been set up":"No se ha establecido ningún correo electrónico",Notifications:"Notificaciones","Please click the button below to authenticate and get access to your data.":"Pulse el botón para autenticarse y ganar acceso a sus datos.","Please contact the administrator if this error persists.":"Contacta con el administrador si el error persiste","Please contact your administrator if you think this message shows up in error.":"Póngase en contacto con su administrador si cree que este mensaje aparece por error.","Private link":"Enlace privado",Profile:"Perfil","Public link":"Enlace público",route:"ruta","Skip to main":"Volver al inicio",this:"esto","User ID":"ID del usuario","User Menu":"Menú del usuario",Username:"Usuario","Welcome to %{productName}":"Bienvenido a %{productName} ","You are not part of any group":"No eres parte de ningún grupo"},fr:{"%{used} of %{total}":"%{used} sur %{total}","<strong>Attention:</strong> this will log you out from all applications you are running in\n          this browser with your current user.":"<strong>Attention :</strong>ceci va vous connecter sur toutes les applications qui sont actuelement ouvertes dans\n          votre nagivateur avec l'utilisateur actuel.","Access denied":"Accès refusé",Account:"Compte","Account Information":"Informations de compte","Account menu":"Menu du compte","Also, make sure to check the browser console for more information.":"Aussi, vérifiez la console de votre navigateur pour plus d'informations.","Application Switcher":" Changeur d'applications","Authentication failed":"Error d'authentification",chat:"chat","Close sidebar":"Fermer le menu latéral","Display name":"Afficher le nom",documentation:"documentation","Download failed":"Echec de téléchargement",Edit:"Editer",Email:"Email","File could not be located":"Le fichier n'a pas été trouvé","For help visit our":"Pour de l'aide visiter notre ","Group memberships":"Membres du groupe",'If you like to login with a different user please proceed to <a id="exitAnchor">exit</a>.':'Pour vous connecter avec un utilisateur différent, veuillez procéder à la <a id="exitAnchor">sortie</a>.',item:"Élément",Loading:"Chargement","Loading folder failed…":"Erreur de chargement du dossier…","Log out":"Se déconnecter",Login:"Se connecter","Login Error":"Erreur de connection","Main navigation":"Navigation principale","Missing or invalid config":"Configuration manqante ou incorrecte",msg:"msg",n:"n","Navigated to %{ pageTitle }":"Aller vers %{ pageTitle }","No email has been set up":"Pas d'adresse e-mail configurée",Notifications:"Notifications","Open navigation menu":"Ouvrir le menu de navigation","or join our":"ou rejoigner notre","ownCloud feedback survey":"Enquête d'opinion sur ownCloud","Please check if the file config.json exists and is correct.":"S'il vous plait, vérifiez que le fichier config.json existe et qu'il est correcte","Please click the button below to authenticate and get access to your data.":"Veuillez cliquer le button ci-dessous pour vous authentifier et obtenir accès à vos données.","Please contact the administrator if this error persists.":"Veuillez contacter l'administrateur si cette erreur persiste.","Please contact your administrator if you think this message shows up in error.":"Veuillez contacter l'administrateur si vous pensez que ce message apparaît par erreur.","Private link":"Lien privé",Profile:"Profil","Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.":"Donner votre retour : nous aimerions améliorer le design du site web et nous serions heureux d'avoir votre retour. Merci ! Votre équipe ownCloud.","Public link":"Lien public",route:"route","Sidebar footer":"Pied du panneau latéral","Sidebar header":"En-tête du panneau latéral","Sidebar navigation menu":"manu de navigation du panneau latéral","Skip to main":"Passer le principal",this:"ceci","User ID":"ID utilisateur","User Menu":"Menu utilisateur",Username:"Nom d'utilisateur","Welcome to %{productName}":"Bienvenue sur %{productName}","You are not part of any group":"Vous n'êtes membre d'aucun groupe","Your user session is invalid or has expired.":"Votre session utilisateur est invalide ou a expirée."},gl:{"%{used} of %{total}":"%{used} de %{total}",Account:"Conta","Account Information":"Información da conta","Application Switcher":"Cambiador de aplicacións","Authentication failed":"Produciuse un fallo de autenticación",documentation:"documentación","Download failed":"Produciuse un fallo na descarga",Edit:"Editar","File could not be located":"Non foi posíbel localizar o ficheiro","For help visit our":"Para obter axuda visite o noso",'If you like to login with a different user please proceed to <a id="exitAnchor">exit</a>.':'Se quere iniciar sesión cun usuario diferente, proceda a <a id="exitAnchor">saír</a>.',item:"elemento",Loading:"Cargando","Loading folder failed…":"Produciuse un fallo ao cargar o cartafol…","Log out":"Saír",Login:"Acceso","Login Error":"Produciuse un erro de acceso",msg:"msx","No email has been set up":"Non se configurou ningún correo-e",Notifications:"Notificacións","Please click the button below to authenticate and get access to your data.":"Prema no botón de embaixo para autenticarse e obter acceso aos seus datos.","Please contact the administrator if this error persists.":"Póñase en contacto co seu administrador se persiste o erro.","Please contact your administrator if you think this message shows up in error.":"Póñase en contacto co seu administrador se cre que esta mensaxe aparece por erro.",Profile:"Perfil","Public link":"Ligazón pública",this:"este","Welcome to %{productName}":"Benvido a %{productName}","You are not part of any group":"Vostede non forma parte de ningún grupo"},it:{}},ue=t.OdsTranslations;var de={install(e){function i(t,i="url",a=null){return new Promise(((n,o)=>{null===a&&(a=new Headers).append("Authorization","Bearer "+e.$store.getters.getToken),a.append("X-Requested-With","XMLHttpRequest"),fetch(t,{headers:a}).then((e=>{e.ok?e.blob().then((e=>{if("base64"===i){const t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){n(t)}}else if("url"===i){const t=window.URL.createObjectURL(e);n(t)}})):o(e)})).catch((e=>{console.warn("media-source",e),o(e)}))}))}function a(e,t){e.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=");const a=t.value;e.setAttribute("data-image-source",a),i(a).then((t=>{a===e.getAttribute("data-image-source")?e.setAttribute("src",t):console.warn("image-source was updated again before image could load")})).catch((e=>{console.warn("image-source",e)}))}e.directive("image-source",{bind(e,t){a(e,t)},update(e,t){t.value!==t.oldValue&&a(e,t)}}),e.mixin({data:function(){return{mediaSourceQueue:new t._default({concurrency:2})}},methods:{mediaSource(e,t="url",a=null){return this.mediaSourceQueue.add((()=>i(e,t,a)))}}})}},pe={install(e){e.mixin({computed:{...t.mapGetters(["getToken","isAuthenticated","capabilities"]),...t.mapGetters("Files",["publicLinkPassword"]),...t.mapGetters(["configuration"]),currentExtension(){return this.$route.path.split("/")[1]},isUrlSigningEnabled(){return this.capabilities.core&&this.capabilities.core["support-url-signing"]}},methods:{...t.mapActions("Files",["addActionToProgress","removeActionFromProgress"]),...t.mapActions(["showMessage"]),publicPage(){return!this.isAuthenticated||!1===this.$route.meta.auth},async downloadFile(e,t=null,i=null){const a=null!==t?t:this.publicPage();let n=null,o={};if(a?n=e.downloadURL:(n=null===i?this.$client.helpers._webdavUrl+e.path:this.$client.fileVersions.getFileVersionUrl(e.id,i),o={Authorization:"Bearer "+this.getToken}),a||!this.isUrlSigningEnabled)this.triggerDownload(n,e.name);else{try{if(200===(await fetch(n,{method:"HEAD",headers:o})).status){const t=await this.$client.signUrl(n);return void this.triggerDownload(t,e.name)}}catch(e){console.error(e)}this.showMessage({title:this.$gettext("Download failed"),desc:this.$gettext("File could not be located"),status:"danger",autoClose:{enabled:!0}})}},isIE11:()=>!!window.MSInputMethodContext&&!!document.documentMode,encodePath:i.encodePath,triggerDownload(e,t){const i=document.createElement("a");i.style.display="none",document.body.appendChild(i),i.href=e,i.setAttribute("download",t),i.click(),document.body.removeChild(i)}}})}},me={install(e){e.mixin({computed:{browserSupportsChunked:()=>t.isSupported},methods:{uploadChunkedFile(e,i,a){return new Promise(((n,o)=>{const s=this.$client.helpers.buildHeaders();delete s["OCS-APIREQUEST"];let r=null;e.lastModifiedDate&&(r=e.lastModifiedDate.getTime()/1e3),e.lastModified&&(r=e.lastModified/1e3);const l=new t.Upload(e,{endpoint:this.$client.files.getFileUrlV2(i),headers:s,chunkSize:a.chunkSize||1/0,removeFingerprintOnSuccess:!0,overridePatchMethod:!!a.overridePatchMethod,retryDelays:[0,3e3,5e3,1e4,2e4],metadata:{filename:e.name,filetype:e.type,size:e.size,mtime:r},onError:t=>{console.error(`Error uploading file "${e}" to "${i}"`,t),o(t)},onProgress:(e,t)=>{a.emitProgress({loaded:e,total:t})},onSuccess:()=>{n(`File ${l.file.name} was successfully uploaded`)}});return l.findPreviousUploads().then((e=>{0!==e.length&&l.resumeFromPreviousUpload(e[0])})),l.start(),l}))}}})}};const ge={name:"Avatar",props:{type:{type:String,default:"div",validator:e=>e.match(/(div|span)/)},userName:{type:String,default:""},userid:{type:String,default:""},width:{type:Number,required:!1,default:42}},data:()=>({avatarSource:"",loading:!0}),computed:{...t.mapGetters(["getToken","capabilities","configuration"])},watch:{userid:function(e){this.setUser(e)}},mounted:function(){""!==this.userid?this.setUser(this.userid):this.loading=!1},methods:{setUser(e){if(this.loading=!0,this.avatarSource="",!this.capabilities.files_sharing.user.profile_picture||""===e)return void(this.loading=!1);const t=new Headers,i=(this.configuration.server||window.location.origin)+"remote.php/dav/avatars/"+e+"/128.png";t.append("Authorization","Bearer "+this.getToken),t.append("X-Requested-With","XMLHttpRequest"),fetch(i,{headers:t}).then((e=>{if(e.ok)return e.blob();if(404!==e.status)throw new Error(`Unexpected status code ${e.status}`)})).then((e=>{this.loading=!1,this.avatarSource=e?window.URL.createObjectURL(e):""})).catch((t=>{this.avatarSource="",this.loading=!1,console.error(`Error loading avatar image for user "${e}": `,t.message)}))}}};var he=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.type,{tag:"component",attrs:{"aria-hidden":!0}},[e.loading?i("oc-spinner",{key:"avatar-loading",style:"width: "+e.width+"px; height: "+e.width+"px;"}):i("oc-avatar",{key:"avatar-loaded",attrs:{width:e.width,src:e.avatarSource,"user-name":e.userName}})],1)};he._withStripped=!0;const fe=t.normalizeComponent({render:he,staticRenderFns:[]},undefined,ge,undefined,false,undefined,!1,void 0,void 0,void 0),ve=[],be="forward",_e="backward";var we={methods:{focus({from:e,to:t,revert:i}){const a=i?_e:be;e&&a===be?ve.splice(0,ve.length):e=document.activeElement,a===be&&ve.push(e),a===_e&&(t=ve.pop()),t instanceof Element&&t.focus()}}},ke={mounted(){this.$nextTick((()=>this.$emit("mounted",this,"mounted")))},beforeDestroy(){this.$emit("beforeDestroy",this,"beforeDestroy")},updated(){this.$nextTick((()=>this.$emit("updated",this,"updated")))}},Ee={bind:function(e,t,i){window.event=function(a){e===a.target||e.contains(a.target)||i.context[t.expression](a)},document.body.addEventListener("click",window.event)},unbind:function(e){document.body.removeEventListener("click",window.event)}};t.Vue.use(t.Plugin),t.Vue.use(t.index),t.Vue.use(t.VueRouter),t.Vue.use(t._default$1),t.Vue.use(t.vueScrollto),t.Vue.use(de),t.Vue.use(pe),t.Vue.use(t.plugin),t.Vue.use(t.index$1,{refreshOnceOnNavigation:!0}),t.Vue.use(me),t.Vue.use(t.vue2TouchEvents),t.Vue.use(t._default$2),t.Vue.use(t.AsyncComputed),t.Vue.component("drag",t.vueDragDrop_common.Drag),t.Vue.component("drop",t.vueDragDrop_common.Drop),t.Vue.component("avatar-image",fe),t.Vue.mixin(we),t.Vue.mixin(ke),t.Vue.directive("click-outside",Ee),window.Vue=t.Vue;const ye=t.lib.createStore(t.index.Store,{...le}),Se={success:C,failure:T},Ae=t.merge({},ce,ue),Ie={en:"English",de:"Deutsch",es:"Español",cs:"Czech",fr:"Français",it:"Italiano",gl:"Galego"};async function Ce(e){const t=sessionStorage.getItem("dynamicClientData");if(null!==t){const e=t.client_secret_expires_at||0;if(0===e||Date.now()<1e3*e)return JSON.parse(t)}sessionStorage.removeItem("dynamicClientData");let i=window.location.href.split("#")[0];i.endsWith("/index.html")&&(i=i.substr(0,i.length-10));const a=await async function(e){return await fetch(e).then((e=>e.json())).catch((e=>{console.error("Error: ",e)}))}(`${e.authority}/.well-known/openid-configuration`),n=await async function(e,t){return await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).catch((e=>{console.error("Error: ",e)}))}(a.registration_endpoint,{redirect_uris:[i+"oidc-callback.html"],client_name:`ownCloud Web on ${i}`});return sessionStorage.setItem("dynamicClientData",JSON.stringify(n)),n}const xe=({applicationName:e,applicationId:a,store:n,router:o,translations:s,supportedLanguages:r})=>{if(!e)throw new i.ApiError("applicationName can't be blank");if(!a)throw new i.ApiError("applicationId can't be blank");return{announceRoutes:e=>((e,a,n)=>{if(!t.isArray(n))throw new i.ApiError("routes can't be blank");const o=n.map((a=>{if(!t.isObject(a))throw new i.ApiError("route can't be blank",a);const n=t.clone(a);return n.name=e===n.name?n.name:`${e}-${n.name}`,n.path=`/${encodeURI(e)}${n.path}`,n.children&&(n.children=n.children.map((n=>{if(!t.isObject(a))throw new i.ApiError("route children can't be blank",a,n);const o=t.clone(n);return o.name=`${e}-${n.name}`,o}))),n}));a.addRoutes(o)})(a,o,e),announceNavigationItems:e=>((e,a,n)=>{if(!t.isObject(n))throw new i.ApiError("navigationItems can't be blank");a.commit("SET_NAV_ITEMS_FROM_CONFIG",{extension:e,navItems:n})})(a,n,e),announceTranslations:e=>((e,a,n)=>{if(!t.isObject(a))throw new i.ApiError("translations can't be blank");Object.keys(e).forEach((e=>{a[e]&&n[e]&&Object.assign(a[e],n[e])}))})(r,s,e),announceQuickActions:e=>((e,a)=>{if(!t.isObject(a))throw new i.ApiError("quickActions can't be blank");e.commit("ADD_QUICK_ACTIONS",a)})(n,e),announceStore:a=>((e,a,n)=>{const o=t.get(n,"default",n);if(!t.isObject(o))throw new i.ApiError("store can't be blank");a.registerModule(e,o)})(e,n,a),announceExtension:e=>((e,t,i)=>{t.commit("REGISTER_EXTENSION",{app:e,extension:i})})(a,n,e),requestStore:()=>(e=>(t.isEqual("production","development")&&console.warn("requestStore // store api is deprecated, use with caution"),e))(n),requestRouter:()=>(e=>(t.isEqual("production","development")&&console.warn("requestRouter // router api is deprecated, use with caution"),e))(o),openPortal:(e,i,n,o,s)=>((e,i,a,n,o,s)=>{t.Wormhole_1.open({to:["app",a,n].filter(Boolean).join("."),from:["app",e,n,o].filter(Boolean).join("."),order:o,passengers:s.map(i.$createElement)})})(a,e,i,n,o,s)}};class Ne extends class{runtimeApi;constructor(e){this.runtimeApi=e}}{applicationScript;constructor(e,t){super(e),this.applicationScript=t}initialize(){const{routes:e,navItems:t,translations:i,quickActions:a,store:n}=this.applicationScript;return e&&this.runtimeApi.announceRoutes(e),t&&this.runtimeApi.announceNavigationItems(t),i&&this.runtimeApi.announceTranslations(i),a&&this.runtimeApi.announceQuickActions(a),n&&this.runtimeApi.announceStore(n),Promise.resolve(void 0)}ready(){const{ready:e}=this.applicationScript;return this.attachPublicApi(e),Promise.resolve(void 0)}mounted(e){const{mounted:t}=this.applicationScript;return this.attachPublicApi(t,e),Promise.resolve(void 0)}userReady(e){const{userReady:t}=this.applicationScript;return this.attachPublicApi(t,e),Promise.resolve(void 0)}attachPublicApi(e,i){t.isFunction(e)&&e({...i&&{portal:{open:(...e)=>this.runtimeApi.openPortal.apply(i,[i,...e])}},instance:i,store:this.runtimeApi.requestStore(),router:this.runtimeApi.requestRouter(),announceExtension:this.runtimeApi.announceExtension})}}const Te=new Map,Le=window.requirejs,Pe=async({applicationPath:e,store:a,router:n,translations:o,supportedLanguages:s})=>{if(Te.has(e))throw new i.RuntimeError("application already announced",e);const r=await new Promise(((t,i)=>Le([e],(e=>t(e)),(e=>i(e))))).catch((t=>{throw console.error(t),new i.RuntimeError("cannot load application",e)}));let l;try{if(!t.isObject(r.appInfo))throw new i.RuntimeError("next applications not implemented yet, stay tuned");l=await(async({applicationScript:e,store:a,router:n,translations:o,supportedLanguages:s})=>{const{appInfo:r}=e;if(!t.isObject(r))throw new i.RuntimeError("appInfo can't be blank");const{id:l,name:c}=r;if(!l)throw new i.RuntimeError("appInfo.id can't be blank");if(!c)throw new i.RuntimeError("appInfo.name can't be blank");const u=xe({applicationName:c,applicationId:l,store:a,router:n,translations:o,supportedLanguages:s});return await a.dispatch("registerApp",e.appInfo),new Ne(u,e)})({applicationScript:r,store:a,router:n,translations:o,supportedLanguages:s}).catch()}catch(t){throw new i.RuntimeError("cannot create application",t.message,e)}return Te.set(e,l),l},$e=async({store:e,vue:i,designSystem:a,runtimeConfiguration:n})=>{const{theme:o}=await(async(e="")=>{const i={theme:t.defaultTheme};if("json"!==e.split(".").pop())return t.isEqual("production","development")&&console.info(`Theme '${e}' does not specify a json file, using default theme.`),i;try{const t=await fetch(e);return t.ok?{theme:await t.json()}:i}catch(t){return console.error(`Failed to load theme '${e}' is not a valid json file, using default theme.`),i}})(n?.theme);await e.dispatch("loadTheme",{theme:o.default}),i.use(a,{tokens:e.getters.theme.designTokens})},Oe=({vue:e,supportedLanguages:i,translations:a})=>{e.use(t.getTextPlugin,{availableLanguages:i,defaultLanguage:navigator.language.substring(0,2),translations:a,silent:!0})},Fe=({store:e})=>{["ownCloud Web UI 4.9.0",S({store:e})].filter(Boolean).forEach((e=>{console.log(`%c ${e} `,"background-color: #041E42; color: #FFFFFF; font-weight: bold; border: 1px solid #FFFFFF; padding: 5px;")}))};e.bootstrap=async e=>{const i=await(async e=>{const t=await fetch(e);if(200!==t.status)throw new Error(`config could not be loaded. HTTP status-code ${t.status}`);return t.json().catch((e=>{throw new Error(`config could not be parsed. ${e}`)}))})(e);(({vue:e,runtimeConfiguration:i})=>{const a=new t.OwnCloud;a.init({baseUrl:i.server||window.location.origin}),e.prototype.$client=a})({vue:t.Vue,runtimeConfiguration:i}),await(async e=>{const{openIdConnect:t={}}=e;if(!t.dynamic)return;const{client_id:i,client_secret:a}=await Ce(t);t.client_id=i,t.client_secret=a})(i),await(async({vue:e,runtimeConfiguration:i,store:a})=>{await a.dispatch("loadConfig",i),await a.dispatch("initAuth"),t.set(e,"$store",a)})({vue:t.Vue,store:ye,runtimeConfiguration:i}),await(async({runtimeConfiguration:e,store:t,router:i,translations:a,supportedLanguages:n})=>{const{apps:o=[],external_apps:s=[]}=e,r=[...o.map((e=>`web-app-${e}`)),...s.map((e=>e.path))].filter(Boolean),l=(await Promise.allSettled(r.map((e=>Pe({applicationPath:e,store:t,supportedLanguages:n,router:i,translations:a}))))).reduce(((e,t)=>("fulfilled"!==t.status?console.error(t.reason):e.push(t.value),e)),[]);await Promise.all(l.map((e=>e.initialize()))),await Promise.all(l.map((e=>e.ready())))})({runtimeConfiguration:i,store:ye,supportedLanguages:Ie,router:Y,translations:Ae}),Oe({vue:t.Vue,supportedLanguages:Ie,translations:Ae}),await $e({store:ye,vue:t.Vue,designSystem:t.designSystem,runtimeConfiguration:i}),(({store:e,router:i})=>{const a=e.getters.appIds;let n=e.getters.configuration.options.defaultExtension;(!n||a.indexOf(n)<0)&&(n=a[0]),i.addRoutes([{path:"/",redirect:()=>e.getters.getNavItemsByExtension(n)[0].route}]),t.sync(e,i)})({store:ye,router:Y})},e.renderFailure=async e=>{Fe({store:ye}),await Oe({vue:t.Vue,supportedLanguages:Ie,translations:Ae}),await $e({store:ye,vue:t.Vue,designSystem:t.designSystem}),console.error(e),new t.Vue({el:"#owncloud",store:ye,render:e=>e(Se.failure)})},e.renderSuccess=()=>{Fe({store:ye});const e=Array.from(Te.values()),i=new t.Vue({el:"#owncloud",store:ye,router:Y,render:e=>e(Se.success)});i.$once("mounted",(()=>{e.forEach((e=>e.mounted(i)))})),ye.watch(((e,t)=>t.isUserReady),((t,a)=>{t&&t!==a&&e.forEach((e=>e.userReady(i)))}),{immediate:!0})},Object.defineProperty(e,"__esModule",{value:!0})}));
