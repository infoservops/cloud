define(["./chunks/vendor-62f8e512"],(function(e){"use strict";const t={computed:{...e.mapGetters(["activeFile"]),...e.mapGetters("MarkdownEditor",["isTouched","isLoading"]),activeFilePath(){return this.activeFile.path.replace(/^(\/|\\)+/,"")}},methods:{...e.mapActions("MarkdownEditor",["saveFile"]),saveContent(){this.saveFile({client:this.$client})},closeApp(){this.$router.push({path:"/files"})}}};var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-app-bar",attrs:{id:"markdown-editor-app-bar"}},[i("oc-grid",{attrs:{flex:"",gutter:"small"}},[i("div",{staticClass:"uk-width-auto"},[i("oc-button",{attrs:{id:"markdown-editor-controls-save",disabled:!e.isTouched},on:{click:e.saveContent}},[i("oc-icon",{attrs:{name:"save"}})],1),e._v(" "),e.isLoading?i("oc-spinner",{attrs:{"aria-label":e.$gettext("Loading editor content")}}):e._e()],1),e._v(" "),i("div",{staticClass:"uk-width-expand uk-text-center"},[i("span",{attrs:{id:"markdown-editor-file-path"}},[e._v(e._s(e.activeFilePath))])]),e._v(" "),i("div",{staticClass:"uk-width-auto uk-text-right"},[i("oc-button",{attrs:{id:"markdown-editor-controls-close"},on:{click:e.closeApp}},[i("oc-icon",{attrs:{name:"close"}})],1)],1)])],1)};i._withStripped=!0;const o={name:"MarkdownEditor",components:{MarkdownEditorAppBar:e.normalizeComponent({render:i,staticRenderFns:[]},undefined,t,undefined,false,undefined,!1,void 0,void 0,void 0)},computed:{...e.mapGetters(["activeFile"]),...e.mapGetters("MarkdownEditor",["currentContent","lastError"]),renderedMarkdown(){return this.currentContent?e.marked(this.currentContent,{sanitize:!0}):null}},mounted(){""!==this.activeFile.path?this.loadFile({filePath:this.activeFile.path,client:this.$client}):this.$router.push({path:"/files"})},methods:{...e.mapActions("MarkdownEditor",["updateText","loadFile","clearLastError"]),onType(e){this.updateText(e)}}};var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{attrs:{id:"markdown-editor"}},[i("markdown-editor-app-bar"),e._v(" "),i("oc-notifications",[e.lastError?i("oc-notification-message",{attrs:{message:e.lastError,status:"danger"},on:{close:e.clearLastError}}):e._e()],1),e._v(" "),i("div",{staticClass:"uk-flex"},[i("div",{staticClass:"uk-container uk-width-1-2"},[i("oc-textarea",{staticClass:"uk-height-1-1",attrs:{id:"markdown-editor-input",name:"input","full-width":"",value:e.currentContent,label:e.$gettext("Editor"),rows:20},on:{input:e.onType}})],1),e._v(" "),i("div",{staticClass:"uk-container uk-width-1-2"},[i("div",{attrs:{id:"markdown-editor-preview"},domProps:{innerHTML:e._s(e.renderedMarkdown)}})])])],1)};r._withStripped=!0;var n={cs:{Editor:"Editor","New mark-down file…":"Nový značkovací soubor…","New plain text file…":"Nový textový soubor..."},de:{Editor:"Editor","Loading editor content":"Lade Editor Inhalt","New mark-down file…":"Neue Markdown-Datei…","New plain text file…":"Neue Textdatei…"},es:{Editor:"Editor","Loading editor content":"Cargando el editor de contenido","New mark-down file…":"Nuevo archivo mark-down...","New plain text file…":"Nuevo archivo de texto plano..."},fr:{Editor:"Éditeur","Loading editor content":"Chargement du contenu de l'éditeur","New mark-down file…":"Nouveau fichier mark-down...","New plain text file…":"Nouveau fichier texte..."},gl:{Editor:"Editor","New mark-down file…":"Novo ficheiro mark-down…","New plain text file…":"Novo ficheiro de texto simple…"},it:{}};var a={namespaced:!0,state:{touched:null,loading:!1,currentETag:null,currentFile:"",lastError:null,text:null},actions:{updateText({commit:e},t){e("TOUCHED",!0),e("UPDATE_TEXT",t)},clearLastError({commit:e}){e("ERROR","")},loadFile({commit:e},t){const i=t.filePath,o=t.client;e("LOADING",!0),e("CURRENT_FILE",i),o.files.getFileContents(i,{resolveWithResponseObject:!0}).then((t=>{e("CURRENT_ETAG",t.headers.ETag),e("UPDATE_TEXT",t.body),e("LOADING",!1)})).catch((t=>{e("ERROR",t.message||t),e("LOADING",!1)}))},saveFile({commit:e,state:t},i){e("LOADING",!0),i.client.files.putFileContents(t.currentFile,t.text,{previousEntityTag:t.currentETag}).then((t=>{e("CURRENT_ETAG",t.ETag),e("TOUCHED",!1),e("LOADING",!1)})).catch((t=>{e("ERROR",t.message||t),e("LOADING",!1)}))}},mutations:{TOUCHED(e,t){e.touched=t},LOADING(e,t){e.loading=t},UPDATE_TEXT(e,t){e.text=t},CURRENT_ETAG(e,t){e.currentETag=t},CURRENT_FILE(e,t){e.currentFile=t},ERROR(e,t){e.lastError=t}},getters:{isTouched:e=>e.touched,isLoading:e=>e.loading,currentContent:e=>e.text,lastError:e=>e.lastError}};const s=[{path:"",components:{app:e.normalizeComponent({render:r,staticRenderFns:[]},undefined,o,undefined,false,undefined,!1,void 0,void 0,void 0)},name:"markdown-editor"}],d={canBeDefault:!0,routes:["files-personal","files-favorites","files-shared-with-others","files-shared-with-me","files-public-list"]};return{appInfo:{name:"MarkdownEditor",id:"markdown-editor",icon:"text",isFileEditor:!0,extensions:[{extension:"txt",newFileMenu:{menuTitle:e=>e("New plain text file…")},...d},{extension:"md",newFileMenu:{menuTitle:e=>e("New mark-down file…")},...d}]},routes:s,store:a,translations:n}}));
